{% extends "base.html" %}
{% block title %}Top vendidos – Ctrl+Store{% endblock %}
{% block content %}
<div class="container my-5">
  <h1 class="mb-4"><i class="fas fa-trophy me-2"></i>Top {{ limit }} productos más vendidos</h1>

  <div class="list-group">
    {% for agg in top_products %}
      <a href="{{ agg.product.get_absolute_url|default:'#' }}" class="list-group-item list-group-item-action bg-dark text-light border-secondary rounded-3 mb-3">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <div class="fw-bold">{{ agg.product.name }}</div>
            <small class="text-muted">Unidades vendidas: {{ agg.units_sold }}</small>
          </div>
          <div class="text-end">
            <div class="fw-semibold">Ingresos: ${{ agg.revenue }}</div>
            {% if agg.last_paid_at %}<small class="text-muted">Última venta: {{ agg.last_paid_at|date:"Y-m-d H:i" }}</small>{% endif %}
          </div>
        </div>
      </a>
    {% empty %}
      <div class="alert alert-secondary">Aún no hay ventas registradas.</div>
    {% endfor %}
  </div>
</div>
{% endblock %}
